<h1 class="heading-large">
  <%= t(".heading", reg_identifier: @transient_registration.reg_identifier) %>
</h1>

<div class="grid-row">
  <div class="column-two-thirds">
    <table>
      <caption class="heading-small">
        <%= t(".reg_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".reg_information.labels.account_email") %>
          </td>
          <td>
            <%= show_value_or_filler(:account_email) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".reg_information.labels.reg_identifier") %>
          </td>
          <td>
            <%= show_value_or_filler(:reg_identifier) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".reg_information.labels.tier") %>
          </td>
          <td>
            <%= show_translation_or_filler(:tier) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".reg_information.labels.registration_type") %>
          </td>
          <td>
            <%= show_translation_or_filler(:registration_type) %>
          </td>
        </tr>
      </tbody>
    </table>

    <table>
      <caption class="heading-small">
        <%= t(".business_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".business_information.labels.company_name") %>
          </td>
          <td>
            <%= show_value_or_filler(:company_name) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".business_information.labels.business_type") %>
          </td>
          <td>
            <%= show_translation_or_filler(:business_type) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".business_information.labels.company_no") %>
          </td>
          <td>
            <%= show_value_or_filler(:company_no) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".business_information.labels.location") %>
          </td>
          <td>
            <%= show_translation_or_filler(:location) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".business_information.labels.registered_address") %>
          </td>
          <td>
            <ul>
            <% display_registered_address.each do |line| %>
              <li><%= line %></li>
            <% end %>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".business_information.labels.main_people") %>
          </td>
          <td>
            <% if @transient_registration.main_people.present? %>
              <% @transient_registration.main_people.each do |person| %>
                <ul>
                  <li><%= person.first_name %> <%= person.last_name %></li>
                  <li><%= person.dob.to_date %></li>
                </ul>
              <% end %>
            <% else %>
              <%= t(".filler") %>
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>

    <table>
      <caption class="heading-small">
        <%= t(".contact_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".contact_information.labels.contact_name") %>
          </td>
          <td>
            <%= show_value_or_filler(:first_name) %> <%= show_value_or_filler(:last_name) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".contact_information.labels.phone_number") %>
          </td>
          <td>
            <%= show_value_or_filler(:phone_number) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".contact_information.labels.contact_email") %>
          </td>
          <td>
            <%= show_value_or_filler(:contact_email) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".contact_information.labels.contact_address") %>
          </td>
          <td>
            <ul>
            <% display_contact_address.each do |line| %>
              <li><%= line %></li>
            <% end %>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>

    <table>
      <caption class="heading-small">
        <%= t(".conviction_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".conviction_information.labels.declared_convictions") %>
          </td>
          <td>
            <%= show_value_or_filler(:declared_convictions) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".conviction_information.labels.relevant_people") %>
          </td>
          <td>
            <% if @transient_registration.relevant_people.present? %>
              <% @transient_registration.relevant_people.each do |person| %>
                <ul>
                  <li><%= person.first_name %> <%= person.last_name %></li>
                  <li><%= person.position %></li>
                  <li><%= person.dob.to_date %></li>
                </ul>
              <% end %>
            <% else %>
              <%= t(".filler") %>
            <% end %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".conviction_information.labels.conviction_check_required") %>
          </td>
          <td>
            <%= @transient_registration.conviction_check_required? %>
          </td>
        </tr>
      </tbody>
    </table>

    <table>
      <caption class="heading-small">
        <%= t(".financial_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".financial_information.labels.copy_cards") %>
          </td>
          <td>
            <%= show_value_or_filler(:temp_cards) %>
          </td>
        </tr>
        <% if @transient_registration.finance_details.present? %>
        <tr>
          <td>
            <%= t(".financial_information.labels.balance") %>
          </td>
          <td>
            £<%= display_pence_as_pounds(@transient_registration.finance_details.balance) %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>

    <% @transient_registration.finance_details.orders.each do |order| %>
    <table>
      <caption class="heading-small">
        <%= t(".order_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".order_information.labels.items") %>
          </td>
          <td>
            <ul>
            <% order.order_items.each do |item| %>
              <li><%= item.description %> (£<%= display_pence_as_pounds(item.amount) %>)</li>
            <% end %>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".order_information.labels.total_amount") %>
          </td>
          <td>
            £<%= display_pence_as_pounds(order.total_amount) %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".order_information.labels.payment_method") %>
          </td>
          <td>
            <%= order.payment_method %>
          </td>
        </tr>
        <% if order.world_pay_status.present? %>
        <tr>
          <td>
            <%= t(".order_information.labels.world_pay_status") %>
          </td>
          <td>
            <%= order.world_pay_status %>
          </td>
        </tr>
        <% end %>
        <tr>
          <td>
            <%= t(".order_information.labels.date_last_updated") %>
          </td>
          <td>
            <%= order.date_last_updated.strftime("%A %e %B %Y at %l:%M%P") %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".order_information.labels.updated_by_user") %>
          </td>
          <td>
            <%= order.updated_by_user %>
          </td>
        </tr>
      </tbody>
    </table>
    <% end %>

    <table>
      <caption class="heading-small">
        <%= t(".renewal_information.heading") %>
      </caption>
      <tbody>
        <tr>
          <td>
            <%= t(".renewal_information.labels.workflow_state") %>
          </td>
          <td>
            <%= display_current_workflow_state %>
          </td>
        </tr>
        <tr>
          <td>
            <%= t(".renewal_information.labels.declaration") %>
          </td>
          <td>
            <%= show_translation_or_filler(:declaration) %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="column-one-third">
    <h2 class="heading-medium">
      <%= t(".sidebar.heading") %>
    </h2>

    <%= link_to t(".sidebar.continue_button"), WasteCarriersEngine::Engine.routes.url_helpers.new_renewal_start_form_path(@transient_registration.reg_identifier), class: 'button' %>
  </div>
</div>
